<!DOCTYPE html>
<!-- Created By CodingNepal - www.codingnepalweb.com -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drag & Drop or Browse: File Upload | CodingNepal</title>
    <link rel="stylesheet" href="/static/test.css">

</head>
<body>
  <h1>DropzoneJS File Upload Demo</h1>
  <SECTION>
    <DIV id="dropzone">
      <FORM class="dropzone needsclick" id="demo-upload" action="/image.html" method="POST">
        <DIV class="dz-message needsclick">    
          Drop files here or click to upload.<BR>
          <SPAN class="note needsclick">(This is just a demo dropzone. Selected 
          files are <STRONG>not</STRONG> actually uploaded.)</SPAN>
        </DIV>
      </FORM>
    </DIV>
  </SECTION>
</body>
</html>


<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/4.3.0/dropzone.js">
// let dropArea = document.getElementById('drop-area')
// ;['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
//   dropArea.addEventListener(eventName, preventDefaults, false)
// })

// function preventDefaults (e) {
//   e.preventDefault()
//   e.stopPropagation()
// }
// ;['dragenter', 'dragover'].forEach(eventName => {
//   dropArea.addEventListener(eventName, highlight, false)
// })

// ;['dragleave', 'drop'].forEach(eventName => {
//   dropArea.addEventListener(eventName, unhighlight, false)
// })

// function highlight(e) {
//   dropArea.classList.add('highlight')
// }

// function unhighlight(e) {
//   dropArea.classList.remove('highlight')
// }
// dropArea.addEventListener('drop', handleDrop, false)

// function handleDrop(e) {
//   let dt = e.dataTransfer
//   let files = dt.files

//   handleFiles(files)
// }
// function handleFiles(files) {
//   ([...files]).forEach(uploadFile)
// }
// // function uploadFile(file) {
// //   let url = 'YOUR URL HERE'
// //   let formData = new FormData()

// //   formData.append('file', file)

// //   fetch(url, {
// //     method: 'POST',
// //     body: formData
// //   })
// //   .then(() => { /* Done. Inform the user */ })
// //   .catch(() => { /* Error. Inform the user */ })
// // }

// function uploadFile(file) {
//   var url = 'test.html'
//   var xhr = new XMLHttpRequest()
//   var formData = new FormData()
//   xhr.open('POST', url, true)

//   xhr.addEventListener('readystatechange', function(e) {
//     if (xhr.readyState == 4 && xhr.status == 200) {
//       // Done. Inform the user
//     }
//     else if (xhr.readyState == 4 && xhr.status != 200) {
//       // Error. Inform the user
//     }
//   })

//   formData.append('file', file)
//   xhr.send(formData)
//}

// If you are using JavaScript/ECMAScript modules:
var dropzone = new Dropzone('#demo-upload', {
  previewTemplate: document.querySelector('#preview-template').innerHTML,
  parallelUploads: 2,
  thumbnailHeight: 120,
  thumbnailWidth: 120,
  maxFilesize: 3,
  filesizeBase: 1000,
  thumbnail: function(file, dataUrl) {
    if (file.previewElement) {
      file.previewElement.classList.remove("dz-file-preview");
      var images = file.previewElement.querySelectorAll("[data-dz-thumbnail]");
      for (var i = 0; i < images.length; i++) {
        var thumbnailElement = images[i];
        thumbnailElement.alt = file.name;
        thumbnailElement.src = dataUrl;
      }
      setTimeout(function() { file.previewElement.classList.add("dz-image-preview"); }, 1);
    }
  }

});


// Now fake the file upload, since GitHub does not handle file uploads
// and returns a 404

var minSteps = 6,
    maxSteps = 60,
    timeBetweenSteps = 100,
    bytesPerStep = 100000;

dropzone.uploadFiles = function(files) {
  var self = this;

  for (var i = 0; i < files.length; i++) {

    var file = files[i];
    totalSteps = Math.round(Math.min(maxSteps, Math.max(minSteps, file.size / bytesPerStep)));

    for (var step = 0; step < totalSteps; step++) {
      var duration = timeBetweenSteps * (step + 1);
      setTimeout(function(file, totalSteps, step) {
        return function() {
          file.upload = {
            progress: 100 * (step + 1) / totalSteps,
            total: file.size,
            bytesSent: (step + 1) * file.size / totalSteps
          };

          self.emit('uploadprogress', file, file.upload.progress, file.upload.bytesSent);
          if (file.upload.progress == 100) {
            file.status = Dropzone.SUCCESS;
            self.emit("success", file, 'success', null);
            self.emit("complete", file);
            self.processQueue();
            //document.getElementsByClassName("dz-success-mark").style.opacity = "1";
          }
        };
      }(file, totalSteps, step), duration);
    }
  }
}



</script>